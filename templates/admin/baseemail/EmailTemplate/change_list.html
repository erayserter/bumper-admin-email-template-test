{% extends "admin/change_list.html" %}

{% load static %}
{% load i18n %}

{% block extrastyle %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'baseemail/index.js' %}" defer></script>
    <link rel="stylesheet" type="text/css" href="{% static 'baseemail/style.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'baseemail/css/bootstrap.min.css' %}">
{% endblock %}

{% block object-tools %}
    <ul class="object-tools d-flex align-items-center justify-content-center">
        {% block object-tools-items %}
            <li class="h-100">
                <label for="email">Email: </label>
                <input type="text" form="changelist-form" name="email">
            </li>
            <li class="h-100">
                <input type="submit" form="changelist-form" formaction="{% url 'admin:test-selected' %}" value="Test Without Email">
            </li>
            <li class="h-100">
                <input type="submit" form="changelist-form" formaction="{% url 'admin:test-selected-email' %}" value="Test With Email">
            </li>
            <li class="h-100">
                <input type="submit" form="changelist-form" formaction="{% url 'admin:test-selected-data' %}" value="Test With Real Data">
            </li>
            {{ block.super }}
        {% endblock %}
    </ul>
{% endblock %}

{% block content %}
    {{ block.super }}
    <div class="clear d-flex gap-5">
        <div>
            {{ email_template | safe }}
        </div>
{#        <pre>{{ fields }}</pre>#}
        <table class="table h-100" style="margin-top: 32px">
            {% for fields in fields_array %}
                <thead>
                    <tr>
                        {% for field in fields %}
                            <th scope="col">{{ field }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for key, value in fields.items %}
                        <td>{{ value }}</td>
                    {% endfor %}
                </tbody>
            {% endfor %}
        </table>
    </div>
{% endblock %}
